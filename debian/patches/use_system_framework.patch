From: Chirayu Desai <chirayudesai1@gmail.com>
Date: Thu, 9 Jun 2016 15:46:53 +0530
Subject: Read first framework directly from the filesystem

* Rather than including a package provided apk in the jar,
  just read it directly from where it gets installed.
---
 .../src/main/java/brut/androlib/res/AndrolibResources.java     | 10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)

diff --git a/brut.apktool/apktool-lib/src/main/java/brut/androlib/res/AndrolibResources.java b/brut.apktool/apktool-lib/src/main/java/brut/androlib/res/AndrolibResources.java
index 0175f3420a..c909fd3ae6 100644
--- a/brut.apktool/apktool-lib/src/main/java/brut/androlib/res/AndrolibResources.java
+++ b/brut.apktool/apktool-lib/src/main/java/brut/androlib/res/AndrolibResources.java
@@ -576,7 +576,7 @@ final public class AndrolibResources {
         }
 
         if (id == 1) {
-            try (InputStream in = AndrolibResources.class.getResourceAsStream("/brut/androlib/android-framework.jar");
+            try (InputStream in = new FileInputStream("/usr/share/android-framework-res/framework-res.apk");
                  OutputStream out = new FileOutputStream(apk)) {
                 IOUtils.copy(in, out);
                 return apk;
@@ -762,12 +762,8 @@ final public class AndrolibResources {
         throw new AndrolibException("Can't set aapt binary as executable");
     }
 
-    public File getAndroidResourcesFile() throws AndrolibException {
-        try {
-            return Jar.getResourceAsFile("/brut/androlib/android-framework.jar");
-        } catch (BrutException ex) {
-            throw new AndrolibException(ex);
-        }
+    public File getAndroidResourcesFile() {
+        return new File("/usr/share/android-framework-res/framework-res.apk");
     }
 
     public ApkOptions apkOptions;
-- 
2.8.1

